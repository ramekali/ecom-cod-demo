import React, { useEffect, useState } from 'react'
import { useParams, useNavigate } from 'react-router-dom'
import api from '../services/api'
export default function Product(){ const { id } = useParams(); const [product,setProduct]=useState(null); const navigate=useNavigate(); useEffect(()=>{ async function load(){ try{ const { data } = await api.get(`/products/${id}`); setProduct(data.product) }catch(e){ console.error(e) } } if(id) load() },[id]); if(!product) return <div>Loading...</div>; function addToCart(){ const cart = JSON.parse(localStorage.getItem('cart')||'[]'); cart.push({ id: product.id, title: product.title, price: product.price, qty:1 }); localStorage.setItem('cart', JSON.stringify(cart)); navigate('/cart') } return (<div style={{display:'grid',gridTemplateColumns:'1fr 320px',gap:20}}><div><img src={product.image||'https://via.placeholder.com/600'} alt="" style={{width:'100%'}}/></div><div><h2>{product.title}</h2><p>${product.price}</p><p>{product.description}</p><button onClick={addToCart}>Add to cart</button></div></div>)}